---
- name: "Recopilar informaci√≥n del sistema"
  hosts: localhost
  gather_facts: yes
  connection: local
  
  tasks:
    - name: "Mostrar informaci√≥n del sistema operativo"
      debug:
        msg: |
          üñ•Ô∏è Sistema: {{ ansible_distribution }} {{ ansible_distribution_version }}
          üíæ Memoria total: {{ (ansible_memtotal_mb / 1024) | round(1) }} GB
          üîß Procesador: {{ ansible_processor[2] }}
          üè† Usuario actual: {{ ansible_user_id }}
          üìÖ Fecha: {{ ansible_date_time.date }}
          ‚è∞ Hora: {{ ansible_date_time.time }}

    - name: "Verificar espacio en disco"
      shell: df -h /
      register: espacio_disco
      
    - name: "Mostrar espacio en disco"
      debug:
        msg: "üíΩ Espacio en disco: {{ espacio_disco.stdout_lines[1] }}"

    - name: "Crear archivo de reporte"
      copy:
        content: |
          REPORTE DEL SISTEMA - {{ ansible_date_time.date }} {{ ansible_date_time.time }}
          ============================================================
          
          Sistema Operativo: {{ ansible_distribution }} {{ ansible_distribution_version }}
          Arquitectura: {{ ansible_architecture }}
          Memoria Total: {{ (ansible_memtotal_mb / 1024) | round(1) }} GB
          Procesador: {{ ansible_processor[2] }}
          Usuario: {{ ansible_user_id }}
          Hostname: {{ ansible_hostname }}
          
          Espacio en Disco:
          {{ espacio_disco.stdout }}
          
          Interfaces de Red:
          {% for interface in ansible_interfaces %}
          - {{ interface }}: {{ ansible_default_ipv4.address if interface == ansible_default_ipv4.interface else 'No configurada' }}
          {% endfor %}
          
        dest: "./reporte-sistema-{{ ansible_date_time.date }}.txt"
        
    - name: "Confirmar creaci√≥n del reporte"
      debug:
        msg: "‚úÖ Reporte guardado en: reporte-sistema-{{ ansible_date_time.date }}.txt" 